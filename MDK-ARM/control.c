#include "control.h"

void control(double pwm_ch1,double pwm_ch2,double pwm_ch3){
    motor1=(-10000+maximum*pwm_ch1)+(10000-maximum*pwm_ch2)+(10000-maximum*pwm_ch3);
    motor2=(10000-maximum*pwm_ch1)+(10000-maximum*pwm_ch2)+(10000-maximum*pwm_ch3);
    motor3=(10000-maximum*pwm_ch1)+(-10000+maximum*pwm_ch2)+(10000-maximum*pwm_ch3);
    motor4=(-10000+maximum*pwm_ch1)+(-10000+maximum*pwm_ch2)+(10000-maximum*pwm_ch3);
    if(motor1>10000){
        diff=motor1-10100;
        coe=diff/motor1;
        motor1=motor1-(motor1*coe);
        motor2=motor2-(motor2*coe);
        motor3=motor3-(motor3*coe);
        motor4=motor4-(motor4*coe);
    };
    if(motor1<-10000){
        diff=motor1+10100;
        coe=diff/motor1;
        motor1=motor1-(motor1*coe);
        motor2=motor2-(motor2*coe);
        motor3=motor3-(motor3*coe);
        motor4=motor4-(motor4*coe);
    };
    if(motor2>10000){
        diff=motor2-10100;
        coe=diff/motor2;
        motor1=motor1-(motor1*coe);
        motor2=motor2-(motor2*coe);
        motor3=motor3-(motor3*coe);
        motor4=motor4-(motor4*coe);
    };
    if(motor2<-10000){
        diff=motor2+10100;
        coe=diff/motor2;
        motor1=motor1-(motor1*coe);
        motor2=motor2-(motor2*coe);
        motor3=motor3-(motor3*coe);
        motor4=motor4-(motor4*coe);
    };
    if(motor3>10000){
        diff=motor3-10100;
        coe=diff/motor3;
        motor1=motor1-(motor1*coe);
        motor2=motor2-(motor2*coe);
        motor3=motor3-(motor3*coe);
        motor4=motor4-(motor4*coe);
    };
    if(motor3<-10000){
        diff=motor3+10100;
        coe=diff/motor3;
        motor1=motor1-(motor1*coe);
        motor2=motor2-(motor2*coe);
        motor3=motor3-(motor3*coe);
        motor4=motor4-(motor4*coe);
    };
    if(motor4>10000){
        diff=motor4-10100;
        coe=diff/motor4;
        motor1=motor1-(motor1*coe);
        motor2=motor2-(motor2*coe);
        motor3=motor3-(motor3*coe);
        motor4=motor4-(motor4*coe);
    };
    if(motor4<-10000){
        diff=motor4+10100;
        coe=diff/motor4;
        motor1=motor1-(motor1*coe);
        motor2=motor2-(motor2*coe);
        motor3=motor3-(motor3*coe);
        motor4=motor4-(motor4*coe);
    };
};
